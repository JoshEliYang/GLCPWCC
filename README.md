# GLCPWCC

# ![](http://120.26.54.131:8090/GMS/image/G.ico) 绿地微信管理后台

***
## 2016/11/8 更新
1. 增加日志
2. 新模板消息（优惠券到期通知）
3. 增加用户关注统计图（尚在开发中）
4. 增加部分模糊查询功能

***
## 2016/8/12 更新
1. 可以配置ATS（Access Token Server），即可以从其他server获得Access Token。
2. 可以提供ATS服务

***
## 功能模块
1. 验证模块（沿用旧版）
2. 基础配置模块（新增）
3. 自动回复模块（重构）
4. 用户标签模块（重构原用户分组模块）
5. 二维码模块（存储到数据库）
6. 自定义菜单模块（重构）
7. 素材管理模块（新增）
8. 报表模块（新增）
9. 日志模块（新增）
10. 通知模块（新增）
11. 权限控制（新增）
12. 消息推送模块（新增）
13. 多微信账号管理（新增）


### 说明:
所有API请求要带上 ```?wechatAccount=[basicId]``` 
```wechatAccount``` 即微信账号id（appid、appSecret...具体在数据库中配置），项目中要使用微信相关账号直接调用 ```Consts``` 中的 ```BASIC_DATA``` 

***
## 详细API
1. 验证模块（沿用旧版）
2. 基础配置模块（新增）
    * 微信账号配置（增删改查）
3. 自动回复模块（重构）
    * 自动回复关键字配置（增删改查，保存自有数据库）
    * 普通文字回复、图文消息回复
4. 用户标签模块（重构原用户分组模块）
    * 标签管理（增删改查）
    * 创建标签同时生成二维码
    * 获得标签下用户信息
5. 二维码模块（存储到数据库）
    * 手动创建二维码（标示不建议手动创建）
    * 查询已生成二维码（自有数据库）
6. 自定义菜单模块（重构）
    * 查询自定义菜单
    * 创建自定义菜单
7. 素材管理模块（新增）
    * 获得图文素材列表
    * 获得其他素材列表（次要，视进度决定）
    * 上传素材（次要，视进度决定）
8. 报表模块（新增）
    * 所有用户信息
    * 微信提供数据报表（次要）
9. 日志模块（新增）
    * MongoDB
10. 通知模块（新增）
    * activeMQ
11. 权限控制（新增）
    1. 请求验证码
        GET方式
        http://localhost:8080/GLCPWCC/login/getVerification
        验证码有效时间:1小时
        系统同时记录客户端的IP，只有这个IP能验证

    2. 登录请求
        POST方式
        http://localhost:8080/GLCPWCC/login/login
        请求参数：
```javascript
{
	"username":"johnson",
    "passwd":"123",
    "verification":"5CY6"
}
```
        
12. 消息推送模块（新增）
    * 模板消息推送
13. 多微信账号管理（新增）

```javascript
    // markdown 代码块示例
    var ihubo = {
        "nickName" : "test",
        "site" : "test"
    }
```

***
## 全局错误代码
1. 101: 尚未登录/登录超时

***
## 关于作者
* [@Johnson Yu](http://weibo.com/2794870214/profile?topnav=1&wvr=6&is_all=1)
* @Wu hai
